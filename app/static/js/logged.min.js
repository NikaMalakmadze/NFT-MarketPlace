import{fetchWithAuth}from"./../main/main/js/useAuth.min.js";let dropdownButtons=document.querySelectorAll("[data-dropdown-btn]"),walletBtn=document.querySelector("#wallet-dropdown-btn"),copyIdBtn=document.querySelector(".wallet__copy-icon"),profileIdElement=document.querySelector(".wallet__profile-id"),logoutBtn=document.querySelector("#logoutBtn"),navbar=document.querySelector("header.header"),searchTrigger=document.getElementById("searchTrigger"),searchModal=document.getElementById("searchModal"),searchInput=document.getElementById("searchInput"),closeSearch=document.getElementById("closeSearch"),searchLoading=document.getElementById("searchLoading"),searchEmpty=document.getElementById("searchEmpty"),searchResults=document.getElementById("searchResults"),nftResults=document.getElementById("nftResults"),collectionResults=document.getElementById("collectionResults"),userResults=document.getElementById("userResults"),userId=document.querySelector(".wallet__profile-id").textContent.trim().at(-1),balanceEls=document.querySelectorAll(".balance-el"),currentDropdown=null,searchTimeout;function openSearchModal(){searchModal.classList.add("open"),document.body.style.overflow="hidden",setTimeout(()=>searchInput.focus(),100)}function closeSearchModal(){searchModal.classList.remove("open"),document.body.style.overflow="",searchInput.value="",showEmptyState()}function showLoadingState(){searchLoading.style.display="flex",searchEmpty.style.display="none",searchResults.classList.remove("show")}function showEmptyState(){searchLoading.style.display="none",searchEmpty.style.display="flex",searchResults.classList.remove("show")}function showResults(){searchLoading.style.display="none",searchEmpty.style.display="none",searchResults.classList.add("show")}function createSearchItem(e,t){return`
    <a href='${e.url}'>
      <div class="search-item">
        <div class="search-item__image">
          <img src="${e.image}" alt="${e.title}" loading="lazy">
        </div>
        <div class="search-item__content">
          <h5 class="search-item__title">${e.title}</h5>
          <p class="search-item__subtitle">${e.subtitle}</p>
        </div>
        ${"nft"===t?`<div class="search-item__price">${e.price}</div>`:""}
      </div>
    </a>
    `}async function performSearch(e){if(e.trim()){showLoadingState();try{var t=await(await fetchWithAuth("/api/search?q="+encodeURIComponent(e))).json(),{nfts:n=[],collections:o=[],users:a=[]}=t.data;nftResults.innerHTML=n.map(e=>createSearchItem(e,"nft")).join(""),collectionResults.innerHTML=o.map(e=>createSearchItem(e,"collection")).join(""),userResults.innerHTML=a.map(e=>createSearchItem(e,"user")).join(""),setTimeout(()=>{showResults()},1e3)}catch(e){console.error("Search failed:",e),showEmptyState()}}else showEmptyState()}function addFunds(){let o=document.getElementById("eth-modal");var e=Array.from(document.querySelectorAll(".profile-btn")).find(e=>"Add Funds"===e.textContent.trim()),t=document.getElementById("confirm-eth"),n=document.getElementById("cancel-eth");e?.addEventListener("click",e=>{e.preventDefault(),o.style.display="flex"}),n.addEventListener("click",()=>{o.style.display="none"}),t.addEventListener("click",async()=>{var e=document.getElementById("eth-amount").value;try{var t=await fetchWithAuth(`/api/user/${userId}/add-funds`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e})}),n=await t.json();t.ok?(o.style.display="none",window.location.reload()):console.log(n.errors)}catch(e){}}),o.addEventListener("click",e=>{e.target===o&&(o.style.display="none")})}function initApp(){dropdownControl(),copyIdClipboard(),window.addEventListener("scroll",glassHeader),logoutBtn.addEventListener("click",e=>{e.preventDefault(),localStorage.removeItem("access_token"),sessionStorage.clear(),window.location.href=logoutBtn.href}),balanceEls.forEach(e=>{e.textContent=formatEthAmount(e.textContent.replace("ETH","").trim())+" ETH"})}function dropdownControl(){walletBtn.addEventListener("click",()=>{walletBtn.classList.toggle("clicked")}),dropdownButtons.forEach(e=>{let t=document.querySelector(`[data-btn="${e.id}"]`);e.addEventListener("click",e=>{e.stopPropagation(),currentDropdown&&currentDropdown!==t&&currentDropdown.classList.remove("open-dropdown"),t.classList.toggle("open-dropdown"),currentDropdown=t.classList.contains("open-dropdown")?t:null})}),document.addEventListener("click",e=>{!currentDropdown||e.target.closest("[data-btn]")&&!e.target.closest(".profile-btn")||(walletBtn.classList.remove("clicked"),currentDropdown.classList.remove("open-dropdown"),currentDropdown=null)})}function copyIdClipboard(){let t=copyIdBtn.innerHTML;copyIdBtn.addEventListener("click",()=>{var e=profileIdElement.textContent.trim().split(" ").at(1);navigator.clipboard.writeText(e),copyIdBtn.innerHTML=document.querySelector("#circleOk").innerHTML,setTimeout(()=>{copyIdBtn.innerHTML=t},500)})}function glassHeader(){10<window.scrollY?navbar.classList.add("scrolled"):navbar.classList.remove("scrolled")}function formatEthAmount(e){e=parseFloat(e);return isNaN(e)?"0":e.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:6})}document.addEventListener("DOMContentLoaded",()=>{addFunds(),searchLoading.style.display="none",searchTrigger&&searchTrigger.addEventListener("click",openSearchModal),closeSearch&&closeSearch.addEventListener("click",closeSearchModal),searchModal&&searchModal.addEventListener("click",function(e){e.target!==searchModal&&!e.target.classList.contains("search-modal__backdrop")||closeSearchModal()}),searchInput&&searchInput.addEventListener("input",function(e){clearTimeout(searchTimeout),searchTimeout=setTimeout(()=>{performSearch(e.target.value)},300)}),document.addEventListener("keydown",function(e){(e.metaKey||e.ctrlKey)&&"k"===e.key&&(e.preventDefault(),openSearchModal()),"Escape"===e.key&&searchModal.classList.contains("open")&&closeSearchModal()})}),initApp();
//# sourceMappingURL=logged.min.js.map
