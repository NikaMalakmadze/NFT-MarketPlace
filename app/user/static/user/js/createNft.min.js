import{fetchWithAuth}from"./../../../../../static/main/main/js/useAuth.min.js";let createNftForm=document.querySelector("#createNftForm"),customSelects=document.querySelectorAll(".custom-select"),imageInputs=document.querySelectorAll(".image-input"),tabsContainer=document.querySelector(".tabs-content__container"),tabsList=document.querySelector(".tabs-btn__wrapper"),tabBtns=document.querySelectorAll(".tab-btn"),tabContents=document.querySelectorAll(".tab-content"),collectionForm=document.querySelector("#collectionForm");function initApp(){initTabs(),customSelects.forEach(e=>chooseCategory(e)),createNftForm.addEventListener("submit",createNft),collectionForm.addEventListener("submit",createCollection),imageInputs.forEach(e=>e.addEventListener("change",imagePreview))}function initTabs(){tabBtns.forEach((e,t)=>{0!=t&&tabContents[t].setAttribute("hidden","")}),tabsList.addEventListener("click",e=>{var t=e.target.closest("a");t&&(e.preventDefault(),switchTab(t))})}function switchTab(e){e=e.getAttribute("href"),e=tabsContainer.querySelector(e);tabContents.forEach(e=>{e.setAttribute("hidden",!0)}),e.removeAttribute("hidden")}function chooseCategory(t){let o=t.querySelector(".select-options"),r=t.querySelector(".selected-option"),n=t.closest(".custom-select-wrapper").querySelector(".selected-input");t.addEventListener("click",()=>{o.classList.toggle("hidden")}),o.addEventListener("click",e=>{e.stopPropagation(),"LI"===e.target.tagName&&(r.textContent=e.target.textContent,n.value=e.target.dataset.value,o.classList.add("hidden"))}),document.addEventListener("click",e=>{e.target!==t&&o.classList.add("hidden")})}function imagePreview(e){let t=new FileReader;var o=e.target.closest(".form__input-file");let r=o.querySelector(".preview"),n=o.querySelector(".form_input-file-info");t.onload=function(){r.src=t.result,r.classList.remove("hidden"),n.classList.add("hidden")},t.readAsDataURL(e.target.files[0])}async function createNft(e){e.preventDefault();var e=document.querySelector("#name").value,t=document.querySelector("#description").value,o=document.querySelector("#price").value,r=document.querySelector("#SelectedNFTCategory").value,n=document.querySelector("#SelectedNFTCollection").value,c=document.querySelector("#inputFile").files[0],a=new FormData;a.append("name",e),a.append("description",t),a.append("price",Number(o)),a.append("category_id",r),a.append("collection_id",n),c&&a.append("image_url",c);try{var l=await fetchWithAuth("/api/nft/create",{method:"POST",body:a}),i=await l.json();if(l.ok)console.log(i),window.location.reload();else{console.error(i.errors);for(var s of i.errors)console.error(s)}}catch(e){console.error(e)}}async function createCollection(e){e.preventDefault();var e=document.querySelector("#CollectionLogo").files[0],t=document.querySelector("#CollectionFeatured").files[0],o=document.querySelector("#CollectionBaner").files[0],r=document.querySelector("#CollectionName").value,n=document.querySelector("#CollectionDescription").value,c=document.querySelector("#CollectionCategory").value,a=document.querySelector("#royalty").value,l=new FormData;l.append("collection_name",r),l.append("collection_description",n),l.append("collection_category_id",c),l.append("royalties",a),e&&l.append("logo_image",e),t&&l.append("featured_image",t),o&&l.append("baner_image",o);try{var i=await fetchWithAuth("/api/nft-collection/create-collection",{method:"POST",body:l}),s=await i.json();if(i.ok)console.log(s),window.location.reload();else{console.log(s.errors);for(var u of s.errors)console.error(u)}}catch(e){console.error(e)}}initApp();
//# sourceMappingURL=createNft.min.js.map
